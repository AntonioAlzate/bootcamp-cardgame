{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/shared/services/api.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/shared/services/auth.service\";\nimport * as i4 from \"src/app/shared/services/websocket.service\";\nimport * as i5 from \"@angular/common\";\n\nfunction ListGameComponent_tr_12_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const recipient_r6 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.showName(recipient_r6.value), \" \");\n  }\n}\n\nfunction ListGameComponent_tr_12_td_6_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function ListGameComponent_tr_12_td_6_button_1_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const juego_r1 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.startGame(juego_r1.id));\n    });\n    i0.ɵɵtext(1, \" Iniciar \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const juego_r1 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", juego_r1.id);\n  }\n}\n\nfunction ListGameComponent_tr_12_td_6_button_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function ListGameComponent_tr_12_td_6_button_2_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const juego_r1 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.joinGame(juego_r1.id));\n    });\n    i0.ɵɵtext(1, \" Unirse \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const juego_r1 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", juego_r1.id);\n  }\n}\n\nfunction ListGameComponent_tr_12_td_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 10);\n    i0.ɵɵtemplate(1, ListGameComponent_tr_12_td_6_button_1_Template, 2, 1, \"button\", 11);\n    i0.ɵɵtemplate(2, ListGameComponent_tr_12_td_6_button_2_Template, 2, 1, \"button\", 12);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const juego_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"ngSwitch\", juego_r1.iniciado);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", false);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", true);\n  }\n}\n\nfunction ListGameComponent_tr_12_td_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\")(1, \"span\", 15);\n    i0.ɵɵtext(2, \"Juego Finalizado\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction ListGameComponent_tr_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 5)(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtemplate(4, ListGameComponent_tr_12_span_4_Template, 2, 1, \"span\", 6);\n    i0.ɵɵpipe(5, \"keyvalue\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, ListGameComponent_tr_12_td_6_Template, 3, 3, \"td\", 7);\n    i0.ɵɵtemplate(7, ListGameComponent_tr_12_td_7_Template, 3, 0, \"td\", 8);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const juego_r1 = ctx.$implicit;\n    const i_r2 = ctx.index;\n    i0.ɵɵproperty(\"ngSwitch\", juego_r1.finalizado);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i_r2 + 1, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(5, 5, juego_r1.jugadores));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngSwitchCase\", false);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", true);\n  }\n}\n\nexport let ListGameComponent = /*#__PURE__*/(() => {\n  class ListGameComponent {\n    constructor(api, router, auth, socket) {\n      this.api = api;\n      this.router = router;\n      this.auth = auth;\n      this.socket = socket;\n      this.uid = \"\";\n      this.uid = JSON.parse(localStorage.getItem('user')).uid;\n      this.api.getMisJuegos(this.uid).subscribe(juegos => {\n        this.juegos = juegos;\n      });\n    }\n\n    ngOnDestroy() {\n      this.socket.close();\n    }\n\n    joinGame(id) {\n      this.router.navigate(['board', id]);\n    }\n\n    showName(data) {\n      const alias = data.alias;\n      return alias.length > 10 ? `${alias.substring(0, 10)}...` : alias;\n    }\n\n    startGame(id) {\n      this.socket.open(id);\n      this.socket.listener(event => {\n        if (event.type == \"cardgame.tablerocreado\") {\n          this.api.crearRonda({\n            juegoId: id,\n            tiempo: 80,\n            jugadores: event.jugadorIds.map(it => it.uuid)\n          }).subscribe();\n        }\n\n        if (event.type == 'cardgame.rondacreada') {\n          this.router.navigate(['board', id]);\n        }\n      });\n      this.api.iniciarJuego({\n        juegoId: id\n      }).subscribe();\n    }\n\n  }\n\n  ListGameComponent.ɵfac = function ListGameComponent_Factory(t) {\n    return new (t || ListGameComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i4.WebsocketService));\n  };\n\n  ListGameComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ListGameComponent,\n    selectors: [[\"app-list-game\"]],\n    decls: 13,\n    vars: 1,\n    consts: [[1, \"displayTable\"], [1, \"displayTableCell\"], [1, \"lista\"], [1, \"gamelist\"], [\"align\", \"center\", 3, \"ngSwitch\", 4, \"ngFor\", \"ngForOf\"], [\"align\", \"center\", 3, \"ngSwitch\"], [\"class\", \"cant\", 4, \"ngFor\", \"ngForOf\"], [3, \"ngSwitch\", 4, \"ngSwitchCase\"], [4, \"ngSwitchCase\"], [1, \"cant\"], [3, \"ngSwitch\"], [3, \"value\", \"click\", 4, \"ngSwitchCase\"], [\"class\", \"join\", 3, \"value\", \"click\", 4, \"ngSwitchCase\"], [3, \"value\", \"click\"], [1, \"join\", 3, \"value\", \"click\"], [1, \"fin\"]],\n    template: function ListGameComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h1\");\n        i0.ɵɵtext(4, \"Lista de juegos\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"table\", 3)(6, \"tr\")(7, \"th\");\n        i0.ɵɵtext(8, \"Juegos\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"th\");\n        i0.ɵɵtext(10, \"Jugadores\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(11, \"th\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(12, ListGameComponent_tr_12_Template, 8, 7, \"tr\", 4);\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"ngForOf\", ctx.juegos);\n      }\n    },\n    dependencies: [i5.NgForOf, i5.NgSwitch, i5.NgSwitchCase, i5.KeyValuePipe],\n    styles: [\".lista[_ngcontent-%COMP%]{margin:0 auto;max-width:800px;background:white;padding:30px 40px 10px;align-items:center;text-align:center;border:10px solid black;border-radius:10px}h1[_ngcontent-%COMP%]{margin:auto}.gamelist[_ngcontent-%COMP%]{width:700px;background-color:#e4e4e4;margin:25px auto;font-size:large;border:2px solid black;border-radius:5px;box-shadow:0 10px 30px 5px #00000026}.gamelist[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:1px solid blue;font-size:20px;padding:8px}.gamelist[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px}button[_ngcontent-%COMP%]{background-color:#2671fc;color:#fff;border:1px solid #2671fc;border-radius:6px;width:200px;height:40px;font-size:large}button[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#fff;color:#2671fc;border:1px solid #2671fc;border-radius:6px}.cant[_ngcontent-%COMP%]{background-color:#2671fc;padding:5px;border:1px solid black;border-radius:50px;color:#fff;width:50px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:1.3rem;margin:0;resize:horizontal}.fin[_ngcontent-%COMP%]{background-color:red;border:1px solid black;border-radius:6px;padding:5px;color:#fff}.join[_ngcontent-%COMP%]{background-color:green;border-color:#000}.join[_ngcontent-%COMP%]:hover{border-color:#000;color:green}\"]\n  });\n  return ListGameComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}